<div class="modal-header">
  <h1 class="modal-title fs-5" id="gridDataLabel">Thông tin chi tiết</h1>
  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" (click)="close()"></button>
</div>
<div class="modal-body">
  <ng-container *ngIf="resSchedule">
    <div class="container-fluid" >
      <div class="row align-items-center">
        <div class="col-12 text-right">
          <a href="javascript:void(0)" *ngIf="type == 'detail'" class="btn btn-sm btn-primary" (click)="isEditChange()">{{!isEdit ? "Chỉnh sửa":"Quay lại"}}</a>
        </div>
      </div>
      <form>
        <div class="pl-lg-4">
          <div class="row">

            <div class="col-lg-4">
              <div class="form-group">
                <label class="form-control-label" for="employeeId">Chọn nhân viên</label>
                <ng-select [items]="resEmployee"
                            bindLabel="nameEmployee"
                            bindValue="idEmployee"
                            [(ngModel)]="resSchedule.employeeId"
                            [disabled]="!isEdit"
                            placeholder="Chọn nhân viên..."
                            name="employeeId"
                            id="employeeId"
                            (change)="inputChange()">
                </ng-select>
              </div>
            </div>
            <div class="col-lg-4">
              <div class="form-group">
                <label class="form-control-label" for="carId">Chọn xe</label>
                <ng-select [items]="resCar"
                            bindLabel="liscensePlate"
                            bindValue="idCar"
                            [(ngModel)]="resSchedule.carId"
                            [disabled]="!isEdit"
                            placeholder="Chọn xe..."
                            name="carId"
                            id="carId"
                            (change)="inputChange()">
                </ng-select>
              </div>
            </div>
            <div class="col-lg-4">
              <div class="form-group">
                <label class="form-control-label" for="input-minCapacity">Mô tả</label>
                <input type="text" name="resSchedule.departurePlace" id="departurePlace" (input)="inputChange()" class="form-control form-control-alternative" placeholder="Nhập nơi khởi hành" [(ngModel)]="resSchedule.departurePlace" [readonly]="!isEdit">
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-6">
              <div class="form-group">
                <label class="form-control-label" for="input-departureDate">Chọn ngày khởi hành</label>
                <input   (change)="resSchedule.departureDate = resScheduleTmp.departureDate; inputChange()" [(ngModel)]="resScheduleTmp.departureDate" class="form-control datepicker" placeholder="Chọn ngày" name="departureDate" id="departureDate" type="date" [disabled]="!isEdit"/>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="form-group">
                <label class="form-control-label" for="input-returnDate">Chọn ngày trở về</label>
                <input   (change)="resSchedule.returnDate = resScheduleTmp.returnDate; inputChange()" [(ngModel)]="resScheduleTmp.returnDate" class="form-control datepicker" placeholder="Chọn ngày" name="returnDate" id="returnDate" type="date" [disabled]="!isEdit"/>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-6">
              <div class="form-group">
                <label class="form-control-label" for="input-promotionId">Chọn khuyến mãi</label>
                <ng-select [items]="resPromotion"
                bindLabel="value"
                bindValue="idPromotion"
                [(ngModel)]="resSchedule.promotionId"
                [disabled]="!isEdit"
                placeholder="Chọn khuyến mãi..."
                name="promotionId"
                id="promotionId"
                (change)="inputChange()">
          </ng-select>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="form-group">
                <label class="form-control-label" for="input-timePromotion">Chọn thời gian khuyến mãi</label>
                <input   (change)="resSchedule.timePromotion = resScheduleTmp.timePromotion; inputChange()" [(ngModel)]="resScheduleTmp.timePromotion" class="form-control datepicker" placeholder="Chọn ngày" name="timePromotion" id="timePromotion" type="date" [disabled]="!isEdit"/>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-6">
              <div class="form-group">
                <label class="form-control-label" for="input-beginDate">Chọn ngày bắt đầu</label>
                <input   (change)="resSchedule.beginDate = resScheduleTmp.beginDate; inputChange()" [(ngModel)]="resScheduleTmp.beginDate" class="form-control datepicker" placeholder="Chọn ngày" name="beginDate" id="beginDate" type="date" [disabled]="!isEdit"/>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="form-group">
                <label class="form-control-label" for="input-endDate">Chọn ngày kết thúc</label>
                <input   (change)="resSchedule.endDate = resScheduleTmp.endDate; inputChange()" [(ngModel)]="resScheduleTmp.endDate" class="form-control datepicker" placeholder="Chọn ngày" name="endDate" id="endDate" type="date" [disabled]="!isEdit"/>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-6">
              <div class="form-group">
                <label class="form-control-label" for="input-minCapacity">Tối thiểu số người</label>
                <input type="text" name="minCapacity" id="minCapacity" (input)="inputChange()" class="form-control form-control-alternative" placeholder="Nhập số lượng tối thiểu" [(ngModel)]="resSchedule.minCapacity" [readonly]="!isEdit">
              </div>
            </div>
            <div class="col-lg-6">
              <div class="form-group">
                <label class="form-control-label" for="input-maxCapacity">Tối đa số người</label>
                <input type="text" name="maxCapacity" id="maxCapacity" (input)="inputChange()" class="form-control form-control-alternative" placeholder="Nhập số lượng tối đa" [(ngModel)]="resSchedule.maxCapacity" [readonly]="!isEdit">
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-10">
              <div class="form-group">
                <label class="form-control-label" for="input-minCapacity">Mô tả</label>
                <input type="text" name="description" id="description" (input)="inputChange()" class="form-control form-control-alternative" placeholder="Nhập mô tả" [(ngModel)]="resSchedule.description" [readonly]="!isEdit">
              </div>
            </div>
            <div class="col-lg-2">
              <div class="form-group">
                <label class="form-control-label" for="input-maxCapacity">Vat</label>
                <input type="text" name="vat" id="vat" (input)="inputChange()" class="form-control form-control-alternative" placeholder="Nhập VAT" [(ngModel)]="resSchedule.vat" [readonly]="!isEdit">
              </div>
            </div>
          </div>
          <div class="row align-items-center">
            <div class="col-12 text-right">
              <button  *ngIf="type == 'detail'" class="btn btn-xl btn-danger" data-bs-toggle="modal" data-bs-target="#deleteProvinceModal" (click)="getDataDelete()">Xóa</button>
              <button *ngIf="isChange && type == 'detail'" class="btn btn-xl btn-info" (click)="restore()">Khôi phục</button>
              <button *ngIf="isChange" class="btn btn-xl btn-success"  (click)="save()">{{type == 'detail' ? "Lưu":"Thêm"}}</button>
            </div>
          </div>
        </div>
        <hr>
        <ngb-accordion #acc="ngbAccordion" [closeOthers]="true" activeIds="static-1">
          <ngb-panel id="static-1" title="Chi phí tour">
            <ng-template ngbPanelContent >
                <div class="col" *ngIf="resCostTour == null">
                  <button class="btn btn-xl btn-primary" (click)="btnAddCost()" >Thêm chi phí</button>
                </div>
                <div class="col-xl-12 align-items-center order-xl-1" *ngIf="resCostTour">
                  <div class="card bg-secondary shadow">
                  <form>
                    <div class="pl-lg-4">
                      <div class="row">
                        <div class="col-lg-3">
                          <div class="form-group">
                            <label class="form-control-label" for="input-breakfast">Chi phí ăn</label>
                            <input type="text" id="breakfast" name="breakfast" (input)="inputChange()" class="form-control form-control-alternative" placeholder="Nhập giá phần ăn" [(ngModel)]="resCostTour.breakfast" [readonly]="!isEdit">
                          </div>
                        </div>
                        <div class="col-lg-3">
                          <div class="form-group">
                            <label class="form-control-label" for="input-water">Chi phí nước</label>
                            <input type="text" id="water" name="water" (input)="inputChange()" class="form-control form-control-alternative" placeholder="Nhập giá nước" [(ngModel)]="resCostTour.water" [readonly]="!isEdit">
                          </div>
                        </div>
                        <div class="col-lg-3">
                          <label class="form-control-label" for="input-fromPlace">Chi phí xăng</label>
                          <input type="text" id="feeGas" name="feeGas" (input)="inputChange()" class="form-control form-control-alternative" placeholder="Nhập chi phí xăng " [(ngModel)]="resCostTour.feeGas" [readonly]="!isEdit">
                        </div>
                        <div class="col-lg-3">
                          <label class="form-control-label" for="input-toPlace">khoảng cách</label>
                          <input type="text" id="distance" name="distance" (input)="inputChange()" class="form-control form-control-alternative" placeholder="Nhập khoảng cách " [(ngModel)]="resCostTour.distance" [readonly]="!isEdit">
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-lg-3">
                          <label class="form-control-label" for="input-toPlace">Chi phí bán</label>
                          <input type="text" id="sellCost" name="sellCost" (input)="inputChange()" class="form-control form-control-alternative" placeholder="Nhập chi phí bán tour " [(ngModel)]="resCostTour.sellCost" [readonly]="!isEdit">
                        </div>
                        <div class="col-lg-3">
                          <label class="form-control-label" for="input-toPlace">Khấu hao</label>
                          <input type="text" id="depreciation" name="depreciation" (input)="inputChange()" class="form-control form-control-alternative" placeholder="Nhập khấu hao " [(ngModel)]="resCostTour.depreciation" [readonly]="!isEdit">
                        </div>
                        <div class="col-lg-3">
                          <label class="form-control-label" for="input-toPlace">Chi phí khác</label>
                          <input type="text" id="otherPrice" name="otherPrice" (input)="inputChange()" class="form-control form-control-alternative" placeholder="Nhập chi phí khác " [(ngModel)]="resCostTour.otherPrice" [readonly]="!isEdit">
                        </div>
                        <div class="col-lg-3">
                          <label class="form-control-label" for="input-toPlace">Chi phí cầu đường</label>
                          <input type="text" id="tolls" name="tolls" (input)="inputChange()" class="form-control form-control-alternative" placeholder="Nhập chi phí bán " [(ngModel)]="resCostTour.tolls" [readonly]="!isEdit">
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-lg-3">
                          <label class="form-control-label" for="input-toPlace">Khách dự kiến </label>
                          <input type="text" id="cusExpected" name="cusExpected" (input)="inputChange()" class="form-control form-control-alternative" placeholder="Nhập số khách dự kiến " [(ngModel)]="resCostTour.cusExpected" [readonly]="!isEdit">
                        </div>
                        <div class="col-lg-3">
                          <label class="form-control-label" for="input-toPlace">Chi phí bảo hiểm</label>
                          <input type="text" id="insuranceFee" name="insuranceFee" (input)="inputChange()" class="form-control form-control-alternative" placeholder="Nhập chi phí bảo hiểm" [(ngModel)]="resCostTour.insuranceFee" [readonly]="!isEdit">
                        </div>
                        <div class="col-lg-3">
                          <label class="form-control-label" for="input-toPlace">Ngày lễ</label>
                          <ng-select [items]="isHoliday"
                          bindLabel="name"
                          bindValue="id"
                          [(ngModel)]="resCostTour.isHoliday"
                          [disabled]="!isEdit"
                          placeholder="Kích hoạt..."
                          name="isHoliday"
                          id="isHoliday"
                          (change)="inputChange()">
              </ng-select>
                        </div>
                      </div>
                      <div class="row">

                        <div class="col-lg-4">
                          <div class="form-group">
                            <label class="form-control-label" for="employeeId">Khách sạn</label>
                            <ng-select [items]="resHotel"
                                        bindLabel="name"
                                        bindValue="idHotel"
                                        [(ngModel)]="resCostTour.hotelId"
                                        [disabled]="!isEdit"
                                        placeholder="Chọn khách sạn..."
                                        name="hotelId"
                                        id="hotelId"
                                        (change)="inputChange()">
                            </ng-select>
                          </div>
                        </div>
                        <div class="col-lg-4">
                          <div class="form-group">
                            <label class="form-control-label" for="carId">Nhà hàng</label>
                            <ng-select [items]="resRestaurant"
                                        bindLabel="name"
                                        bindValue="idRestaurant"
                                        [(ngModel)]="resCostTour.restaurantId"
                                        [disabled]="!isEdit"
                                        placeholder="Chọn nhà hàng..."
                                        name="restaurantId"
                                        id="restaurantId"
                                        (change)="inputChange()">
                            </ng-select>
                          </div>
                        </div>
                        <div class="col-lg-4">
                          <div class="form-group">
                            <label class="form-control-label" for="carId">Địa điểm</label>
                            <ng-select [items]="resPlace"
                                        bindLabel="name"
                                        bindValue="idPlace"
                                        [(ngModel)]="resCostTour.placeId"
                                        [disabled]="!isEdit"
                                        placeholder="Chọn địa điểm..."
                                        name="placeId"
                                        id="placeId"
                                        (change)="inputChange()">
                            </ng-select>
                          </div>
                        </div>
                      </div>
                      <hr>
                    </div>
                  </form>
                  <div class="row align-items-center">
                    <div class="col-12 text-right">
                      <button *ngIf="isChange" class="btn btn-lg btn-success"  (click)="saveCostTour()">{{type == 'detail' ? "Cập nhật thông tin/ giá":"Thêm"}}</button>
                      <!-- <button *ngIf="isChange && resCostTour == null && isAdd == true" class="btn btn-lg btn-success"  (click)="createCostNot()">Cập nhật giá</button> -->
                    </div>
                  </div>
                </div>
                </div>
            </ng-template>
          </ngb-panel>
        </ngb-accordion>
      </form>
    </div>



  </ng-container>
</div>
